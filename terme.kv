#: import FadeTransition kivy.uix.screenmanager.FadeTransition


ScreenManager:
    transition: FadeTransition()
    StartScreen:
    GameScreen:
    QuitScreen:

<StartScreen@Screen>:
    name: "start"
    on_enter:
        level1.state = 'normal'
        level2.state = 'normal'
        level3.state = 'normal'
        startBUT.disabled = True


    canvas:
        Color:
            rgba: 1, 1, 1, 1
        Rectangle:
            size: self.size
            pos: self.pos
    BoxLayout:
        orientation: 'vertical'
        BoxLayout:
            orientation: 'vertical'
            Label:
                text: '[b]Finde alle Teiler zu dem angegebenen Term,\nindem du alle möglichen Teiler in dem 4x4 Feld antippst![/b]'
                color: 0,0,0,1
                markup: True
                text_size: self.size
                halign: 'center'
                valign: 'middle'
            Label:
                text: '[b]Wähle ein Schwierigkeitslevel aus:[/b]'
                color: 0,0,0,1
                markup: True
                text_size: self.size
                halign: 'center'
                valign: 'middle'
        BoxLayout:
            orientation: 'horizontal'
            ToggleButton:
                id: level1
                on_press: app.controller.toggle_level(0)
                text: "[b]Level 1[/b]"
                markup: True
                text_size: self.size
                halign: 'center'
                valign: 'middle'

            ToggleButton:
                id: level2
                on_press: app.controller.toggle_level(1)
                text: "[b]Level 2[/b]"
                markup: True
                text_size: self.size
                halign: 'center'
                valign: 'middle'

            ToggleButton:
                id: level3
                on_press: app.controller.toggle_level(2)
                text: "[b]Level 3[/b]"
                markup: True
                text_size: self.size
                halign: 'center'
                valign: 'middle'

        BoxLayout:
            orientation: 'horizontal'
            Button:
                id: startBUT
                disabled: False if (app.controller.game.exercise_factory.level[0] and not(app.controller.game.exercise_factory.level[1]) and not(app.controller.game.exercise_factory.level[2])) or (app.controller.game.exercise_factory.level[1] and not(app.controller.game.exercise_factory.level[0]) and  not(app.controller.game.exercise_factory.level[2])) or (app.controller.game.exercise_factory.level[2] and not(app.controller.game.exercise_factory.level[0]) and not(app.controller.game.exercise_factory.level[1])) else True
                on_press:

                    root.manager.current = "game"
                text: "[b]Spiel starten[/b]"
                markup: True
                text_size: self.size
                halign: 'center'
                valign: 'middle'


<GameScreen@Screen>:
    name: "game"
    on_enter:
        teiler0.state = 'normal'
        teiler1.state = 'normal'
        teiler2.state = 'normal'
        teiler3.state = 'normal'
        teiler4.state = 'normal'
        teiler5.state = 'normal'
        teiler6.state = 'normal'
        teiler7.state = 'normal'
        teiler8.state = 'normal'
        teiler9.state = 'normal'
        teiler10.state = 'normal'
        teiler11.state = 'normal'
        teiler12.state = 'normal'
        teiler13.state = 'normal'
        teiler14.state = 'normal'
        teiler15.state = 'normal'





    canvas:
        Color:
            rgba: 1, 1, 1, 1
        Rectangle:
            size: self.size
            pos: self.pos
    BoxLayout:
        orientation: 'vertical'
        BoxLayout:
            orientation: 'horizontal'
            BoxLayout:
                orientation: 'vertical'
                Label:
                    text: '[b]Finde alle Teiler zu dem angegebenen Term,\nindem du alle möglichen Teiler in dem 4x4 Feld antippst![/b]'
                    color: 0,0,0,1
                    markup: True
                    text_size: self.size
                    halign: 'center'
                    valign: 'middle'
        Exercise
        BoxLayout:
            orientation: 'horizontal'
            ToggleButton:
                id: teiler0
                on_press: app.controller.toggle_factor(0)
                text: str(app.controller.game.solution.exercise[1][0])
                text_size: self.size
                halign: 'center'
                valign: 'middle'
                background_color: 1, .18, .27, .8
            ToggleButton:
                id: teiler1
                on_press: app.controller.toggle_factor(1)
                text: str(app.controller.game.solution.exercise[1][1])
                text_size: self.size
                halign: 'center'
                valign: 'middle'
                background_color: 1, 1, 0, .6
            ToggleButton:
                id: teiler2
                on_press: app.controller.toggle_factor(2)
                text: str(app.controller.game.solution.exercise[1][2])
                text_size: self.size
                halign: 'center'
                valign: 'middle'
                background_color: 1, .18, .27, .8
            ToggleButton:
                id: teiler3
                on_press: app.controller.toggle_factor(3)
                text: str(app.controller.game.solution.exercise[1][3])
                text_size: self.size
                halign: 'center'
                valign: 'middle'
                background_color: 1, 1, 0, .6
        BoxLayout:
            orientation: 'horizontal'
            ToggleButton:
                id: teiler4
                on_press: app.controller.toggle_factor(4)
                text: str(app.controller.game.solution.exercise[1][4])
                text_size: self.size
                halign: 'center'
                valign: 'middle'
                background_color: 1, 1, 0, .6
            ToggleButton:
                id: teiler5
                on_press: app.controller.toggle_factor(5)
                text: str(app.controller.game.solution.exercise[1][5])
                text_size: self.size
                halign: 'center'
                valign: 'middle'
                background_color: 1, .18, .27, .8
            ToggleButton:
                id: teiler6
                on_press: app.controller.toggle_factor(6)
                text: str(app.controller.game.solution.exercise[1][6])
                text_size: self.size
                halign: 'center'
                valign: 'middle'
                background_color: 1, 1, 0, .6
            ToggleButton:
                id: teiler7
                on_press: app.controller.toggle_factor(7)
                text: str(app.controller.game.solution.exercise[1][7])
                text_size: self.size
                halign: 'center'
                valign: 'middle'
                background_color: 1, .18, .27, .8
        BoxLayout:
            orientation: 'horizontal'
            ToggleButton:
                id: teiler8
                on_press: app.controller.toggle_factor(8)
                text: str(app.controller.game.solution.exercise[1][8])
                text_size: self.size
                halign: 'center'
                valign: 'middle'
                background_color: 1, .18, .27, .8
            ToggleButton:
                id: teiler9
                on_press: app.controller.toggle_factor(9)
                text: str(app.controller.game.solution.exercise[1][9])
                text_size: self.size
                color: 1, 1, 1, 1
                halign: 'center'
                valign: 'middle'
                background_color: 1, 1, 0, .6
            ToggleButton:
                id: teiler10
                on_press: app.controller.toggle_factor(10)
                text: str(app.controller.game.solution.exercise[1][10])
                text_size: self.size
                color: 1, 1, 1, 1
                halign: 'center'
                valign: 'middle'
                background_color: 1, .18, .27, .8
            ToggleButton:
                id: teiler11
                on_press: app.controller.toggle_factor(11)
                text: str(app.controller.game.solution.exercise[1][11])
                text_size: self.size
                color: 1, 1, 1, 1
                halign: 'center'
                valign: 'middle'
                background_color:
                background_color: 1, 1, 0, .6
        BoxLayout:
            orientation: 'horizontal'
            ToggleButton:
                id: teiler12
                on_press: app.controller.toggle_factor(12)
                text: str(app.controller.game.solution.exercise[1][12])
                text_size: self.size
                halign: 'center'
                valign: 'middle'
                background_color: 1, 1, 0, .6
            ToggleButton:
                id: teiler13
                on_press: app.controller.toggle_factor(13)
                text: str(app.controller.game.solution.exercise[1][13])
                text_size: self.size
                halign: 'center'
                valign: 'middle'
                background_color: 1, .18, .27, .8
            ToggleButton:
                id: teiler14
                on_press: app.controller.toggle_factor(14)
                text: str(app.controller.game.solution.exercise[1][14])
                text_size: self.size
                halign: 'center'
                valign: 'middle'
                background_color: 1, 1, 0, .6
            ToggleButton:
                id: teiler15
                on_press: app.controller.toggle_factor(15)
                text: str(app.controller.game.solution.exercise[1][15])
                text_size: self.size
                halign: 'center'
                valign: 'middle'
                background_color: 1, .18, .27, .8

        BoxLayout:
            orientation: 'horizontal'
            Label:
                id: polynom
                text: str(app.controller.game.solution.exercise[0])
                markup: True
                color: 0,0,0,0.9
                text_size: self.size
                halign: 'center'
                valign: 'middle'


        BoxLayout:
            orientation: 'horizontal'
            Button:
                id: quitBUT
                on_press: app.controller.get_solution()
                on_release:
                    root.manager.current = "quit"
                text: "[b]Spiel beenden[/b]"
                markup: True
                text_size: self.size
                halign: 'center'
                valign: 'middle'


<QuitScreen@Screen>:
    name: "quit"
    canvas:
        Color:
            rgba: 1, 1, 1, 1
        Rectangle:
            size: self.size
            pos: self.pos
    BoxLayout:
        orientation: "vertical"

        Label:
            text: "[b]Deine Punktzahl:[/b]"
            text_size: self.size
            color: 0,0,0,1
            markup: True
            halign: 'center'
            valign: 'middle'
        Label:
            id: punktzahl
            text: str(app.controller.game.solution.score)
            color: 0,0,0,1
        BoxLayout:
            orientation: "horizontal"
            Button:
                on_press:
                    app.controller.restart()
                    root.manager.current = "start"
                text: "[b]Neues Spiel[/b]"
                text_size: self.size
                markup: True
                halign: 'center'
                valign: 'middle'
            Button:
                on_release: app.stop()
                text: "[b]App schließen[/b]"
                text_size: self.size
                markup: True
                halign: 'center'
                valign: 'middle'